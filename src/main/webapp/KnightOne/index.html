<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>KnightOne Bootstrap Template - Index</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
          rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

    <!-- =======================================================
    * Template Name: KnightOne
    * Updated: Sep 18 2023 with Bootstrap v5.3.2
    * Template URL: https://bootstrapmade.com/knight-simple-one-page-bootstrap-template/
    * Author: BootstrapMade.com
    * License: https://bootstrapmade.com/license/
    ======================================================== -->


</head>

<body>

<!-- ======= Header ======= -->
<header id="header" class="fixed-top">
    <div class="container-fluid">

        <div class="row justify-content-center">
            <div class="col-xl-9 d-flex align-items-center justify-content-lg-between">
                <h1 class="logo me-auto me-lg-0"><a href="index.html">舟亢的书城</a></h1>
                <!-- Uncomment below if you prefer to use an image logo -->
                <!-- <a href="index.html" class="logo me-auto me-lg-0"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

                <nav id="navbar" class="navbar order-last order-lg-0">
                    <ul>
                        <li><a class="nav-link scrollto active" href="#hero">首页</a></li>


                        <li><a class="nav-link scrollto" href="#portfolio">读者精选</a></li>
                        <li><a class="nav-link scrollto" href="#pricing">列表</a></li>


                    </ul>
                    <i class="bi bi-list mobile-nav-toggle"></i>
                </nav><!-- .navbar -->


                <div class="search-bar">
                    <input type="text" placeholder="搜索..." id="search" oninput="searchTable()">
                </div>

            </div>
        </div>

    </div>
</header><!-- End Header -->

<!-- ======= Hero Section ======= -->
<section id="hero" class="d-flex flex-column justify-content-center">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-8">
                <h1>舟亢的书城</h1>
                <h2>来自桃六的设计团队</h2>
                <a href="https://www.bilibili.com/video/BV1tb4y1L7yA/?spm_id_from=333.337.search-card.all.click&vd_source=aab2dfdfb1004598ac61b6c20c664e49" class="glightbox play-btn mb-4"></a>
            </div>
        </div>
    </div>
</section><!-- End Hero -->

<main id="main">

    <!-- ======= 作品集 Section ======= -->
    <section id="portfolio" class="portfolio">
        <div class="container">

            <div class="section-title">
                <h2>读者精选</h2>
                <p>
                    伟大的痛苦是有益的。必要的是他的后果是从某种逃避而来的。坐在那里是有特色的。任何人都想要爱。而且没有人可以阻止它。因为逃避坐在这些办公室里是有益的。</p>
            </div>

            <div class="row">
                <div class="col-lg-12 d-flex justify-content-center">
                    <ul id="portfolio-flters">
                        <li data-filter="*" class="filter-active">全部</li>
                        <li data-filter=".filter-app" class="">历史</li>
                        <li data-filter=".filter-card" class="">小说</li>
                        <li data-filter=".filter-web" class="">诗集</li>
                    </ul>
                </div>
            </div>

            <div class="row portfolio-container" style="position: relative; height: 1267.12px;">
                <div class="col-lg-4 col-md-6 portfolio-item filter-app"
                     style="position: absolute; left: 0px; top: 0px;">
                    <img src="http://10.69.219.123:8080/JAVA_FINAL_WORK/uploads/1701095614005.jpg" class="img-fluid"
                         alt="">
                    <div class="portfolio-info">
                        <h4>历史 1</h4>
                        <p>历史</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-web"
                     style="position: absolute; left: 440px; top: 0px;">
                    <img src="assets/img/portfolio/portfolio-2.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>诗集 3</h4>
                        <p>诗集</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-app"
                     style="position: absolute; left: 880px; top: 0px;">
                    <img src="assets/img/portfolio/portfolio-3.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>历史 2</h4>
                        <p>历史</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-card"
                     style="position: absolute; left: 880px; top: 264px;">
                    <img src="assets/img/portfolio/portfolio-4.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>小说 2</h4>
                        <p>小说</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-web"
                     style="position: absolute; left: 440px; top: 308.929px;">
                    <img src="assets/img/portfolio/portfolio-5.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>诗集 2</h4>
                        <p>诗集</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-app"
                     style="position: absolute; left: 0px; top: 451.714px;">
                    <img src="assets/img/portfolio/portfolio-6.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>历史 3</h4>
                        <p>历史</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-card"
                     style="position: absolute; left: 880px; top: 569.071px;">
                    <img src="assets/img/portfolio/portfolio-7.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>小说 1</h4>
                        <p>小说</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-card"
                     style="position: absolute; left: 880px; top: 869.098px;">
                    <img src="assets/img/portfolio/portfolio-8.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>小说 3</h4>
                        <p>小说</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 portfolio-item filter-web"
                     style="position: absolute; left: 440px; top: 960.777px;">
                    <img src="assets/img/portfolio/portfolio-9.jpg" class="img-fluid" alt="">
                    <div class="portfolio-info">
                        <h4>诗集 3</h4>
                        <p>诗集</p>

                        <a href="portfolio-details.html" class="details-link" title="更多详情"><i
                                class="bx bx-link"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section><!-- End 作品集 Section -->

    <!-- ======= 定价 Section ======= -->
    <section id="pricing" class="pricing">
        <div class="container">

            <div class="section-title">
                <h2>列表</h2>
                <p>
                    生活中的挑战是成长的催化剂。重要的是，这些挑战源自于对自我超越的追求。坚持不懈是一种独特的品质。每个人都渴望成功。并且没有什么能够阻挡这种渴望。因为面对困难和坚持到底，在这些挑战中坚持不懈，是成长的关键。</p>
            </div>

            <div class="row" id="bookTable">

            </div>
        </div>
    </section><!-- End 定价 Section -->
    <!-- 添加分页控件 -->
    <div id="pagination" style="text-align: center; margin-bottom: 20px;">
        <label for="currentPage">当前页：</label>
        <input type="number" id="currentPage" value="1" min="1" oninput="searchTable()" style="width: 50px;">
        <button onclick="changePage(-1)">上一页</button>
        <button onclick="changePage(1)">下一页</button>
    </div>


    <!-- ======= Faq Section ======= -->
    <!-- End Faq Section -->

    <!-- ======= 联系我们 Section ======= -->


</main><!-- End #main -->

<!-- ======= Footer ======= -->
<footer id="footer">
    <div class="container">
        <h3>舟亢一号</h3>
        <p>Et aut eum quis fuga eos sunt ipsa nihil. Labore corporis magni eligendi fuga maxime saepe commodi
            placeat.</p>
        <div class="social-links">
            <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
            <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
            <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
            <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
            <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
        <div class="copyright">
            © Copyright <strong><span>舟亢一号</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/knight-simple-one-page-bootstrap-template/ -->
            Designed by 舟亢
        </div>
    </div>
</footer><!-- End Footer -->


<!--<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i-->
<!--        class="bi bi-arrow-up-short"></i></a>-->
<div id="preloader"></div>
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
        class="bi bi-arrow-up-short"></i></a>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    axios.get("http://10.69.219.123:8080/JAVA_FINAL_WORK/DatabaseReader", {
        params: {
            searchType: "book",
            filter: "",
            page: 1 // 使用当前输入的页码
        }
    })
        .then(function (response) {
            for (var i = 0; i < document.getElementsByClassName("img-fluid").length; i++) {
                document.getElementsByClassName("img-fluid")[i].src = response.data[i].image;
                document.getElementsByClassName("details-link")[i].href = "portfolio-details.html?book=" + encodeURIComponent(response.data[i].book) +
                    "&content=" + encodeURIComponent(response.data[i].content) +
                    "&price=" + encodeURIComponent(response.data[i].price) +
                    "&author=" + encodeURIComponent(response.data[i].author) +
                    "&nation=" + encodeURIComponent(response.data[i].nation) +
                    "&image=" + encodeURIComponent(response.data[i].image);
            }
            var element = document.querySelector('li.filter-active[data-filter="*"]');
            window.addEventListener('load', element.click());
        })
</script>
<script>
    var currentPage = 1; // 当前页码

    function searchTable1() {
        axios.get("http://10.69.219.123:8080/JAVA_FINAL_WORK/DatabaseReader", {
            params: {
                searchType: "author",
                filter: document.getElementById('search').value,
                page: document.getElementById('currentPage').value // 使用当前输入的页码
            }
        })
            .then(function (response) {
                var booksData = response.data;
                var table = document.getElementById('bookTable');

                document.getElementById("bookTable").innerHTML = "";
                for (var i = 0; i < booksData.length; i++) {
                    var author = booksData[i].author;
                    var nation = booksData[i].nation;
                    var book = booksData[i].book;
                    var price = booksData[i].price;
                    var content = booksData[i].content;
                    var image = booksData[i].image;
                    var htmlContent = `
    <div class="col-lg-4 col-md-6" style="margin-top:33px">
        <div class="box">
            <img src=${image} style="max-width: 100%; height:auto; max-height: 210px">
            <ul>
                <li>书名: ${book}</li>
                <li>作者: ${author}</li>
                <li>国籍: ${nation}</li>
                <li>价格: ${price}</li>
            </ul>
            <div class="btn-wrap">
                   <a href="portfolio-details.html?book=${encodeURIComponent(response.data[i].book)}&content=${encodeURIComponent(response.data[i].content)}&price=${encodeURIComponent(response.data[i].price)}&author=${encodeURIComponent(response.data[i].author)}&nation=${encodeURIComponent(response.data[i].nation)}&image=${encodeURIComponent(response.data[i].image)}" class="btn-buy">Buy Now</a>

            </div>
        </div>
    </div>
`;
                    document.getElementById("bookTable").insertAdjacentHTML('beforeend', htmlContent);
                }

            }).catch(function (error) {
            // 处理错误响应
            console.error('获取数据时出错：', error);
        });
    }



    // 修改 searchTable 函数，添加页码参数
    function searchTable() {
        axios.get("http://10.69.219.123:8080/JAVA_FINAL_WORK/DatabaseReader", {
            params: {
                searchType: "book",
                filter: document.getElementById('search').value,
                page: document.getElementById('currentPage').value // 使用当前输入的页码
            }
        })
            .then(function (response) {
                var booksData = response.data;
                var table = document.getElementById('bookTable');
                if (booksData.length === 0) {
                    searchTable1();
                } else {
                    document.getElementById("bookTable").innerHTML = "";
                    for (var i = 0; i < booksData.length; i++) {
                        var author = booksData[i].author;
                        var nation = booksData[i].nation;
                        var book = booksData[i].book;
                        var price = booksData[i].price;
                        var content = booksData[i].content;
                        var image = booksData[i].image;
                        var htmlContent = `
    <div class="col-lg-4 col-md-6"  id= "s123" style="margin-top:33px">
        <div class="box">
            <img src=${image} style="max-width: 100%; height: auto; max-height: 210px">
            <ul>
                <li>书名: ${book}</li>
                <li>作者: ${author}</li>
                <li>国籍: ${nation}</li>
                <li>价格: ${price}</li>
            </ul>
            <div class="btn-wrap">
                         <a href="portfolio-details.html?book=${encodeURIComponent(response.data[i].book)}&content=${encodeURIComponent(response.data[i].content)}&price=${encodeURIComponent(response.data[i].price)}&author=${encodeURIComponent(response.data[i].author)}&nation=${encodeURIComponent(response.data[i].nation)}&image=${encodeURIComponent(response.data[i].image)}" class="btn-buy">Buy Now</a>

            </div>
        </div>
    </div>
`;
                        document.getElementById("bookTable").insertAdjacentHTML('beforeend', htmlContent);
                    }

                }
            }).catch(function (error) {
            // 处理错误响应
            console.error('获取数据时出错：', error);
        });
    }



    function changePage(offset) {
        currentPage += offset;
        if (currentPage < 1) {
            currentPage = 1;
        }
        document.getElementById('currentPage').value = currentPage;
        searchTable();
    }

    // 页面加载时执行一次搜索
    // window.onload = function () {
    //     searchTable();
    // };
    window.addEventListener('load', searchTable);

</script>
<!-- Vendor JS Files -->
<script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>


</body>

</html>
